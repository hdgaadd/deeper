# detail

- **IO复用**

  - 同步阻塞、同步非阻塞IO都是**一个线程处理一个IO流**，故造成每个线程的使用时间都非常短，故线程会频繁切换，把资源浪费在上下文切换上

  - 故利用**一个**线程处理**多个**IO流，来实现降低资源浪费

    利用一个线程来监控所有IO流的数据**就绪状态**，若就绪，则**放出**一个线程去处理该IO流







# problem

- **如何从存储大量的url的a、b两个文件中，获取相同的url**

  > 思想是**分治策略**，**减少不必要的**遍历与比较

  - 对a文件的每个url进行`hash(url) % 1000操作`，采用**分治策略**，则a文件的url会存储到多1000个文件中，对b文件进行相同操作

    每个String类型的相同url进行hash操作，返回的是相同值

  - 把a、b文件的各1000个文件中的url分别存储在1000个**HashSet**中

    则每次从a、b中，取出第n个文件的HashSet，对比获取相同的url

- **如何实现限流**

  时间上的限制、请求次数上的限制

  - **计数器**

    > 一定时间段设置总数

    设置在1min中，每个程序可以请求的次数n，进行**计数**，若超过限制次数则代表应该限流

    劣势：若在1min中的最后1s，一次性请求n次，则不会进行限制，但造成当前时间点服务器压力过大

  - **滑动窗口**

    > 把一定时间段进行细分，每n个小时间段设置总数

    把1min进行6**等份细分**，即设置10s内可以请求的次数，采用**计数器**对**每**10s进行请求计数，每10s的请求总数到达n/6，则代表应该限流

    好处：防止了在极短时间内进行**大量请求**的情况，每个10s的推进类似于窗口的滑动

    劣势：支出了多个计数器的线程**消耗**